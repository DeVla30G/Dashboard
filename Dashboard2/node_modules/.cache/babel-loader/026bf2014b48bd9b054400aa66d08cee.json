{"ast":null,"code":"// @ is an alias to /src\nconst axios = require('axios');\n\nexport default {\n  name: \"CrudUpdatePost\",\n  components: {},\n  props: [\"id\"],\n  data: () => {\n    return {\n      title: \"\",\n      user_id: \"\",\n      category_id: \"\",\n      content: \"\",\n      img_post: \"\"\n    };\n  },\n  methods: {\n    update(event) {\n      event.preventDefault();\n      axios.put('http://localhost:8000/api/posts/' + this.id, {\n        title: this.title,\n        user_id: this.user_id,\n        category_id: this.category_id,\n        content: this.content,\n        img_post: this.img_post\n      }).then(response => {\n        console.log(response.data);\n        var result = response.data;\n\n        if (result != null) {\n          alert(\"Post modifié !\");\n          window.location.reload();\n        }\n      }).catch(error => {\n        console.log(error);\n        console.log(\"error\", error.response.data);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAkCA;AACA,MAAMA,KAAI,GAAIC,OAAO,CAAC,OAAD,CAArB;;AACA,eAAe;AACbC,MAAI,EAAE,gBADO;AAEbC,YAAU,EAAE,EAFC;AAGbC,OAAK,EAAE,CAAC,IAAD,CAHM;AAIbC,MAAI,EAAE,MAAM;AACV,WAAO;AACLC,WAAK,EAAE,EADF;AAELC,aAAO,EAAC,EAFH;AAGLC,iBAAW,EAAE,EAHR;AAILC,aAAO,EAAE,EAJJ;AAKLC,cAAQ,EAAC;AALJ,KAAP;AAOD,GAZY;AAabC,SAAO,EAAE;AACPC,UAAM,CAACC,KAAD,EAAO;AACXA,WAAK,CAACC,cAAN;AACAd,WAAK,CAACe,GAAN,CAAU,qCAAqC,KAAKC,EAApD,EAAwD;AACtDV,aAAK,EAAE,KAAKA,KAD0C;AAEtDC,eAAO,EAAC,KAAKA,OAFyC;AAGtDC,mBAAW,EAAE,KAAKA,WAHoC;AAItDC,eAAO,EAAC,KAAKA,OAJyC;AAKtDC,gBAAQ,EAAE,KAAKA;AALuC,OAAxD,EAOCO,IAPD,CAOOC,QAAD,IAAc;AAClBC,eAAO,CAACC,GAAR,CAAYF,QAAQ,CAACb,IAArB;AACA,YAAIgB,MAAK,GAAIH,QAAQ,CAACb,IAAtB;;AACA,YAAIgB,MAAK,IAAK,IAAd,EAAmB;AACjBC,eAAK,CAAC,gBAAD,CAAL;AACAC,gBAAM,CAACC,QAAP,CAAgBC,MAAhB;AACF;AACD,OAdD,EAeCC,KAfD,CAeQC,KAAD,IAAW;AAChBR,eAAO,CAACC,GAAR,CAAYO,KAAZ;AACAR,eAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBO,KAAK,CAACT,QAAN,CAAeb,IAApC;AACD,OAlBD;AAmBD;;AAtBM;AAbI,CAAf","names":["axios","require","name","components","props","data","title","user_id","category_id","content","img_post","methods","update","event","preventDefault","put","id","then","response","console","log","result","alert","window","location","reload","catch","error"],"sourceRoot":"","sources":["/home/fanny/Rendu2/C-COD-280-PAR-2-2-dashboard-vladimira.grosjean/Dashboard2/src/views/CrudAdmin/CrudUpdatePost.vue"],"sourcesContent":["<template>\n\n<div class=\"container\">\n  <div class=\"container loginForm\"><!--v-if='login-admin' -->\n  <!-- Pills navs -->\n<ul class=\"nav nav-pills nav-justified mb-3\" id=\"ex1\" role=\"tablist\">\n  \n</ul>\n<!-- Pills navs -->\n\n<!-- Pills content -->\n<div class=\"tab-content shadow-lg p-3 mb-5 bg-white rounded\">\n\n    <form method='put'>\n      \n      <div class=\"form-group mb-1\">\n    <input v-model=\"title\" type=\"email\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Edit title ...\">\n  </div>\n\n    <div class=\"form-group mb-2\">\n    <textarea v-model=\"content\" class=\"form-control\" id=\"exampleFormControlTextarea1\"  placeholder=\"Edit content ...\" rows=\"3\"></textarea>\n  </div>\n\n\n      <!-- Submit button -->\n      <button @click=\"update\" type=\"submit\" class=\"btn btn-primary btn-block mb-3\">Edit</button>\n    </form>\n\n</div>\n</div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nconst axios = require('axios');\nexport default {\n  name: \"CrudUpdatePost\",\n  components: {},\n  props: [\"id\"],\n  data: () => {\n    return {\n      title: \"\",\n      user_id:\"\",\n      category_id: \"\",\n      content: \"\",\n      img_post:\"\",\n    };\n  },\n  methods: {\n    update(event){\n      event.preventDefault()\n      axios.put('http://localhost:8000/api/posts/' + this.id, {\n        title: this.title,\n        user_id:this.user_id,\n        category_id: this.category_id,\n        content:this.content,\n        img_post: this.img_post,\n      })\n      .then((response) => {\n        console.log(response.data);\n        var result = response.data;\n        if (result != null){\n          alert(\"Post modifié !\")\n          window.location.reload();\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n        console.log(\"error\", error.response.data);\n      })\n    },\n\n  }\n};\n</script>\n<style>\n.loginForm{\n  width: 50%;\n  margin-top: 150px;\n}\n</style>\n\n async update(event) {     \n      event.preventDefault();\n      const preview = document.querySelector('img_post');\n        const file = document.querySelector('input[type=file]').files[0];\n        const reader = new FileReader();\n        let image = '';\n        await reader.addEventListener(\"load\", async () => {\n          // on convertit l'image en une chaîne de caractères base64\n          image = reader.result;\n          console.log(image);\n          fetch(image)\n          .then(res => res.blob())\n          .then(blob => {\n            console.log(blob)\n             axios.put(\"http://localhost:8000/api/posts\" + this.id, {\n          title: this.title,\n          user_id: '',\n          category_id: this.categorie,\n          content: this.content,\n          img_post: image,\n            })          \n        })\n        .then((response) => {\n        console.log(response.data);\n        var result = response.data;\n        if (result != null){\n          alert(\"Post modifié !\")\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n        console.log(\"error\", error.response.data);\n      })\n        }, false);\n\n        if (file) {\n          await reader.readAsDataURL(file);\n          console.log(reader);\n          console.log(image);\n          \n    }\n        axios\n          .get(\"http://localhost:8000/api/posts\", {})\n          .then((response) => {\n            console.log(response.data);\n          })\n          .catch((error) => {\n            alert(error);\n            console.log(error);\n          });\n          \n    },\n  },\n};"]},"metadata":{},"sourceType":"module"}