{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2aeefec1\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"border-bottom mb-3\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Comments\")], -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card-comment\"\n};\nconst _hoisted_5 = {\n  class: \"commentDate\"\n};\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_hoisted_2, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.comments, comment => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: comment.id,\n      class: \"row card mb-4\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", _hoisted_4, _toDisplayString(comment.comment), 1\n    /* TEXT */\n    )]), _createElementVNode(\"span\", _hoisted_5, _toDisplayString(comment.created_at.substr(0, 10)), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n      onClick: _withModifiers($event => $options.deleteCom(comment), [\"prevent\"]),\n      href: \"#\",\n      type: \"button\",\n      id: \"crud\",\n      class: \"btn btn-outline-dark\"\n    }, \" Supprimer \", 8\n    /* PROPS */\n    , _hoisted_6)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]);\n}","map":{"version":3,"mappings":";;;;;AAGYA,OAAK,EAAC;;;gEACXC,oBAAoD,GAApD,EAAoD;AAAjDD,OAAK,EAAC;AAA2C,CAApD,EAAsB,cAACC,oBAAyB,QAAzB,EAAyB,IAAzB,EAAQ,UAAR,CAAD,CAAtB;;AAAA;;;AAGUD,OAAK,EAAC;;;AACHA,OAAK,EAAC;;;AAIPA,OAAK,EAAC;;;;uBATtBE,oBAyBS,SAzBT,cAyBS,CAxBLC,UAwBK,qBAtBJD,oBAoBME,SApBN,EAoBM,IApBN,EAoBMC,YApBiBC,cAoBjB,EApBMC,OAAmB,IAAZ;yBAAnBL,oBAoBM,KApBN,EAoBM;AApB4BM,SAAG,EAAED,OAAO,CAACE,EAoBzC;AApB6CT,WAAK,EAAC;AAoBnD,KApBN,GACIC,oBAIM,KAJN,cAIM,CAHJA,oBAEO,MAFP,cAEOS,iBADLH,OAAO,CAACA,OACH,CAFP,EACiB;AAAA;AADjB,KAGI,CAJN,GAKCN,oBAEU,MAFV,cAEUS,iBADLH,OAAO,CAACI,UAAR,CAAmBC,MAAnB,CAAyB,CAAzB,EAAyB,EAAzB,CACK,CAFV,EAC8B;AAAA;AAD9B,OAGGX,oBAUF,KAVE,EAUF,IAVE,EAUF,CATJA,oBAQS,QART,EAQS;AAPFY,aAAK,2BAAUC,mBAAUP,OAAV,CAAV,EAA2B,WAA3B,CAOH;AANPQ,UAAI,EAAC,GAME;AALPC,UAAI,EAAC,QAKE;AAJPP,QAAE,EAAC,MAII;AAHPT,WAAK,EAAC;AAGC,KART,EAMC,aAND,EAQA;AAAA;AARA,MAQAiB,UARA,CASI,CAVE,EATR;GAoBM,CApBN;;AAAA,GAsBI,EAzBT","names":["class","_createElementVNode","_createElementBlock","_hoisted_2","_Fragment","_renderList","$data","comment","key","id","_toDisplayString","created_at","substr","onClick","$options","href","type","_hoisted_6"],"sourceRoot":"","sources":["/home/fanny/Rendu2/C-COD-280-PAR-2-2-dashboard-vladimira.grosjean/Dashboard2/src/components/CrudComment.vue"],"sourcesContent":["\r\n\r\n<template>\r\n   <section class=\"border-bottom mb-3\">\r\n       <p class=\"text-center\"><strong>Comments</strong></p>\r\n\r\n        <div v-for=\"comment in comments\" :key=\"comment.id\" class=\"row card mb-4\">\r\n            <div class=\"card-body\">\r\n              <span class=\"card-comment\">\r\n              {{comment.comment}} \r\n              </span>\r\n            </div>\r\n             <span class=\"commentDate\">\r\n                {{comment.created_at.substr(0, 10)}}\r\n                </span>\r\n                <div>\r\n          <button\r\n            v-on:click.prevent=\"deleteCom(comment)\"\r\n            href=\"#\"\r\n            type=\"button\"\r\n            id=\"crud\"\r\n            class=\"btn btn-outline-dark\"\r\n          >\r\n            Supprimer\r\n          </button>\r\n        </div>\r\n        </div>\r\n\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nconst axios = require(\"axios\");\r\nexport default {\r\n  name: \"CrudComment\",\r\n  props: [\"idPost\", \"comment\", \"user_id\", \"post_id\"],\r\n  data() {\r\n      return {\r\n        comments: {},\r\n      };\r\n    },\r\n  async mounted() {\r\n    const getComments = async () => {\r\n      try {\r\n        const resp = axios\r\n          .get(\r\n            \"http://localhost:8000/api/comments/\" + this.$route.params.id,\r\n            {}\r\n          )\r\n          .then((response) => {\r\n            console.log(this.idPost);\r\n            this.comments = response.data;\r\n            console.log(response.data);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n      } catch (err) {\r\n        Console.error(err);\r\n      }\r\n    };\r\n    getComments();\r\n  },\r\n  methods: {\r\n    getComment(){axios\r\n          .get(\"http://localhost:8000/api/comments/\")\r\n          .then((response) => {\r\n            console.log(response)\r\n            this.comments = response.data\r\n          })\r\n    },\r\n    deleteCom(comment) { \r\n      console.log(comment);\r\n     if(confirm(\"Supprimer ce commentaire ?\")) { axios.delete(\"http://localhost:8000/api/comments/\" + comment.id, {})\r\n    .then((response) => {\r\n            console.log(this.id);\r\n            this.comments = response.data;\r\n            console.log(response.data);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n          }\r\n      }\r\n  }\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#crud {\r\n  margin-right: 5px;\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}